# Qtlyst (Cutelyst && QMLWeb)

## Getting Started

These instructions will help to combine Cutelyst and QMLWeb in QtCreator
for setup of a full-stack web application with Qt technologies.  Please see
the slack documents if more detail is necessary.

### Prerequisites

Cutelyst (follow install instructions there):

https://github.com/cutelyst/cutelyst/wiki/Installing-Cutelyst

QMLWeb (download should not be necessary, as all engine files are included in this project):

https://github.com/qmlweb/qmlweb

QtCreator (Qt v5.9.5 was necessary to avoid errors by the most recent commit on 9/19/18)


### Setup

It would be a good idea to first get a basic Cutelyst application working
outside of QtCreator to take care of any dependency/environment issues ahead of time.
This tutorial will allow you to create a basic web application and spin up a server
to test in the browser:  

https://github.com/cutelyst/cutelyst/wiki/Tutorial_02_CutelystBasics

If everything went smoothly with Cutelyst we can now checkout a commit.
It is recommended to first check out the "QMLWeb working" commit, as that is
pretty bare bones.  Unlike Cutelyst, QMLWeb should work out of the box since all
engine files have been moved out of the qmlweb download into static/js.

Once that commit is checked out we can open up tutorial.pro in QtCreator then we will now see our full subdirs project.  One thing we should address right away is where
our build output is going to be.  Since we are going to want to access our
shared object file for use after it is built, I've used the build directory
generated by creating a cutelyst application inside of server-files/project.
This is where we should send our build output.  If you take a look at the AppRunner.pro file you will see a few file paths that rely on a consistent build output directory; if there are any build issues, I would check these paths first.

Another thing that might be worth checking if there are issues setting up is in
main.cpp.  This is where we are running our cutelyst server, so it'll be worth
checking that /usr/bin/cutelyst2 is a legitimate process on your machine.  And
while we are in main.cpp it is also worth noting the limitations of this commit.
Up until commit on (9/19/18), output is not being properly piped from
the cutelyst server process to qtcreator.  This is fixed in the most recent
commit (with limitations on live feedback).

Also, as of the most recent commit (9/19/18) all of the LIBS dependencies in
server-files.pro are system dependent, so please change those to your personal cutelyst
installation directory.

The "QMLWeb working" commit should now show "hello" at localhost:3000/hello in
the browser when running AppRunner.

### Running

The most recent commit implements a REST-like HTTP architecture.  We will find
the meat of the application as of now at localhost:3000/monitor/patients.
This is what a URL should look like for a GET request that views a list.
If we click on a particular patient we will be redirected to a url like
localhost:3000/monitor/patients/{patient_id}.  As of now, the unique ID is simple,
but ideally we would have some secure and unique UUID for each patient.
A sqlite database is used to fetch patient data, and uses the {patient_id}
argument as a value for lookup across HTTP requests, so we know we are displaying
the correct patient.

Trends prototype progress can be viewed at localhost:3000/monitor/trends.
